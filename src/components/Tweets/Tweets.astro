---
import Card from './../Card/Card.astro';

import { ENV_VARS } from './../../../private/index.js';

import type { Tweet } from './tweets.type'

const token = ENV_VARS.BEARER_TWITTER_TOKEN;
let tweets : Tweet[] = [];

try {
    const response = await fetch('https://api.twitter.com/2/tweets?ids=1278747501642657792,1255542774432063488', {
        method: 'GET',
        headers: {'authorization': `Bearer ${token}`}
    });
    
    const json : Record<string, Tweet[]> = await response.json();
    tweets = json.data || [];
} catch {}
---

<div class="grid gap-4 grid-cols-1 md:grid-cols-4">
    {
        tweets.map(({text, id}) => 
            <Card
                href={`https://twitter.com/realmarcel1/status/${id}`}
                title="From TwitterDev"
                body={text}
            />
        )
    }
</div>